<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>module Nokogiri::HTML5 - RDoc Documentation</title>


  <meta name="keywords" content="ruby,module,Nokogiri::HTML5">

    <meta name="description" content="module Nokogiri::HTML5: doc = Nokogiri. HTML5.">





<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:title" content="module Nokogiri::HTML5 - RDoc Documentation">



    <meta property="og:description" content="doc = Nokogiri. HTML5.">





<!-- Twitter -->
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="module Nokogiri::HTML5 - RDoc Documentation">



    <meta name="twitter:description" content="doc = Nokogiri. HTML5.">



<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/theme-toggle.js?v=7.0.3"></script>

<script src="../js/search_navigation.js?v=7.0.3" defer></script>

<script src="../js/search_data.js?v=7.0.3" defer></script>

<script src="../js/search_ranker.js?v=7.0.3" defer></script>

<script src="../js/search_controller.js?v=7.0.3" defer></script>

<script src="../js/c_highlighter.js?v=7.0.3" defer></script>

<script src="../js/aliki.js?v=7.0.3" defer></script>

<link href="../css/rdoc.css?v=7.0.3" rel="stylesheet">


  <link href="../rdoc-tweaks.css?v=7.0.3" rel="stylesheet">



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BZR5RZN084"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-BZR5RZN084');
</script>
</head>
<body role="document" class="module has-toc">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <!-- Chevron (right arrow) - used for expand/collapse -->
  <symbol id="icon-chevron" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <polyline points="9 18 15 12 9 6"></polyline>
  </symbol>

  <!-- File/Document - Pages section -->
  <symbol id="icon-file" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>

    <polyline points="14 2 14 8 20 8"></polyline>
  </symbol>

  <!-- Layers/Stack - Classes and Modules section -->
  <symbol id="icon-layers" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
    <polyline points="2 17 12 22 22 17"></polyline>
    <polyline points="2 12 12 17 22 12"></polyline>
  </symbol>

  <!-- Curly braces with C - Class Methods section -->
  <symbol id="icon-class-methods" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M6 3C3.5 3 2 4.5 2 7v3c0 1.5-1 2-1 2s1 .5 1 2v5c0 2.5 1.5 4 4 4"></path>
    <path d="M18 3c2.5 0 4 1.5 4 4v3c0 1.5 1 2 1 2s-1 .5-1 2v5c0 2.5-1.5 4-4 4"></path>

    <text x="12" y="17" text-anchor="middle" font-size="13" font-weight="bold" fill="currentColor" stroke="none">
      C
    </text>
  </symbol>

  <!-- Curly braces with I - Instance Methods section -->
  <symbol id="icon-instance-methods" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M6 3C3.5 3 2 4.5 2 7v3c0 1.5-1 2-1 2s1 .5 1 2v5c0 2.5 1.5 4 4 4"></path>
    <path d="M18 3c2.5 0 4 1.5 4 4v3c0 1.5 1 2 1 2s-1 .5-1 2v5c0 2.5-1.5 4-4 4"></path>

    <text x="12" y="17" text-anchor="middle" font-size="13" font-weight="bold" fill="currentColor" stroke="none">
      I
    </text>
  </symbol>

  <!-- Double chevrons up - Ancestors section -->
  <symbol id="icon-ancestors" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <polyline points="17 11 12 6 7 11"></polyline>
    <polyline points="17 18 12 13 7 18"></polyline>
  </symbol>

  <!-- User with plus - Included Modules section -->
  <symbol id="icon-includes" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
    <circle cx="8.5" cy="7" r="4"></circle>

    <line x1="20" y1="8" x2="20" y2="14"></line>

    <line x1="23" y1="11" x2="17" y2="11"></line>
  </symbol>

  <!-- User with check - Extended Modules section -->
  <symbol id="icon-extends" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
    <circle cx="8.5" cy="7" r="4"></circle>
    <polyline points="17 11 19 13 23 9"></polyline>
  </symbol>

  <!-- List - Sections section -->
  <symbol id="icon-list" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <line x1="8" y1="6" x2="21" y2="6"></line>

    <line x1="8" y1="12" x2="21" y2="12"></line>

    <line x1="8" y1="18" x2="21" y2="18"></line>

    <line x1="3" y1="6" x2="3.01" y2="6"></line>

    <line x1="3" y1="12" x2="3.01" y2="12"></line>

    <line x1="3" y1="18" x2="3.01" y2="18"></line>
  </symbol>
</svg>

<header class="top-navbar">
  <a href="../index.html" class="navbar-brand">
    RDoc Documentation
  </a>

  <!-- Desktop search bar -->
  <div class="navbar-search navbar-search-desktop" role="search">
    <form action="#" method="get" accept-charset="utf-8">
      <input id="search-field" role="combobox" aria-label="Search" aria-autocomplete="list" aria-controls="search-results-desktop" type="text" name="search" placeholder="Search (/) for a class, method..." spellcheck="false" autocomplete="off" title="Type to search, Up and Down to navigate, Enter to load">
      <ul id="search-results-desktop" aria-label="Search Results" aria-busy="false" aria-expanded="false" aria-atomic="false" class="initially-hidden search-results"></ul>
    </form>
  </div>

  <!-- Mobile search icon button -->
  <button id="search-toggle" class="navbar-search-mobile" aria-label="Open search" type="button">
    <span aria-hidden="true">üîç</span>
  </button>

  <!-- Theme toggle button -->
  <button id="theme-toggle" class="theme-toggle" aria-label="Switch to dark mode" type="button">
    <span class="theme-toggle-icon" aria-hidden="true">üåô</span>
  </button>
</header>

<!-- Search Modal (Mobile) -->
<div id="search-modal" class="search-modal" hidden aria-modal="true" role="dialog" aria-label="Search">
  <div class="search-modal-backdrop"></div>
  <div class="search-modal-content">
    <div class="search-modal-header">
      <form class="search-modal-form" action="#" method="get" accept-charset="utf-8">
        <span class="search-modal-icon" aria-hidden="true">üîç</span>
        <input id="search-field-mobile" role="combobox" aria-label="Search" aria-autocomplete="list" aria-controls="search-results-mobile" type="text" name="search" placeholder="Search documentation" spellcheck="false" autocomplete="off">
        <button type="button" class="search-modal-close" aria-label="Close search" id="search-modal-close">
          <span aria-hidden="true">esc</span>
        </button>
      </form>
    </div>
    <div class="search-modal-body">
      <ul id="search-results-mobile" aria-label="Search Results" aria-busy="false" aria-expanded="false" aria-atomic="false" class="search-results search-modal-results initially-hidden"></ul>
      <div class="search-modal-empty">
        <p>No recent searches</p>
      </div>
    </div>
  </div>
</div>

<div id="navigation-toggle" role="button" tabindex="0" aria-label="Toggle sidebar" aria-expanded="true" aria-controls="navigation">
  <span aria-hidden="true">‚ò∞</span>
</div>


<nav id="navigation" role="navigation" hidden>
  




  <div id="fileindex-section" class="nav-section">
    <details class="nav-section-collapsible">
      <summary class="nav-section-header">
        <span class="nav-section-icon">
          <svg>
            <use href="#icon-file"></use>
          </svg>
        </span>

        <span class="nav-section-title">Pages</span>

        <span class="nav-section-chevron">
          <svg>
            <use href="#icon-chevron"></use>
          </svg>
        </span>
      </summary>

      <ul class="nav-list">






            <li>
              <a href="../README_md.html">
                README
              </a>
            </li>

      </ul>
    </details>
  </div>


  

  

  

  

  
  <div class="nav-section">
    <details class="nav-section-collapsible" open>
      <summary class="nav-section-header">
        <span class="nav-section-icon">
          <svg><use href="#icon-class-methods"></use></svg>
        </span>
        <span class="nav-section-title">Class Methods</span>
        <span class="nav-section-chevron">
          <svg><use href="#icon-chevron"></use></svg>
        </span>
      </summary>
      <ul class="nav-list" role="directory">

        <li><a href="#method-c-fragment">fragment</a></li>

        <li><a href="#method-c-parse">parse</a></li>

      </ul>
    </details>
  </div>




  <div id="classindex-section" class="nav-section">
  <details class="nav-section-collapsible" open>
    <summary class="nav-section-header">
      <span class="nav-section-icon">
        <svg><use href="#icon-layers"></use></svg>
      </span>
      <span class="nav-section-title">Classes and Modules</span>
      <span class="nav-section-chevron">
        <svg><use href="#icon-chevron"></use></svg>
      </span>
    </summary>

    <ul class="link-list nav-list">
<li><details><summary><code><a href="../Nokogiri.html">Nokogiri</a></code></summary><ul class="link-list nav-list">
<li><details><summary><code><a href="../Nokogiri/CSS.html">CSS</a></code></summary><ul class="link-list nav-list">
<li><code><a href="../Nokogiri/CSS/SyntaxError.html">SyntaxError</a></code></li>
<li><details><summary><code><a href="../Nokogiri/CSS/XPathVisitor.html">XPathVisitor</a></code></summary><ul class="link-list nav-list">
<li><code><a href="../Nokogiri/CSS/XPathVisitor/BuiltinsConfig.html">BuiltinsConfig</a></code></li>
<li><code><a href="../Nokogiri/CSS/XPathVisitor/DoctypeConfig.html">DoctypeConfig</a></code></li>
</ul></details></li>
</ul></details></li>
<li><code><a href="../Nokogiri/ClassResolver.html">ClassResolver</a></code></li>
<li><details><summary><code><a href="../Nokogiri/Decorators.html">Decorators</a></code></summary><ul class="link-list nav-list"><li><code><a href="../Nokogiri/Decorators/Slop.html">Slop</a></code></li></ul></details></li>
<li><code><a href="../Nokogiri/EncodingHandler.html">EncodingHandler</a></code></li>
<li><code><a href="../Nokogiri/Gumbo.html">Gumbo</a></code></li>
<li><details><summary><code><a href="../Nokogiri/HTML4.html">HTML</a></code></summary><ul class="link-list nav-list">
<li><code><a href="../Nokogiri/HTML/Builder.html">Builder</a></code></li>
<li><code><a href="../Nokogiri/HTML/Document.html">Document</a></code></li>
<li><code><a href="../Nokogiri/HTML/DocumentFragment.html">DocumentFragment</a></code></li>
</ul></details></li>
<li><details><summary><code><a href="../Nokogiri/HTML4.html">HTML4</a></code></summary><ul class="link-list nav-list">
<li><code><a href="../Nokogiri/HTML4/Builder.html">Builder</a></code></li>
<li><code><a href="../Nokogiri/HTML4/Document.html">Document</a></code></li>
<li><code><a href="../Nokogiri/HTML4/DocumentFragment.html">DocumentFragment</a></code></li>
<li><code><a href="../Nokogiri/HTML4/ElementDescription.html">ElementDescription</a></code></li>
<li><code><a href="../Nokogiri/HTML4/EntityDescription.html">EntityDescription</a></code></li>
<li><code><a href="../Nokogiri/HTML4/EntityLookup.html">EntityLookup</a></code></li>
<li><details><summary><code><a href="../Nokogiri/HTML4/SAX.html">SAX</a></code></summary><ul class="link-list nav-list">
<li><code><a href="../Nokogiri/HTML4/SAX/Parser.html">Parser</a></code></li>
<li><code><a href="../Nokogiri/HTML4/SAX/ParserContext.html">ParserContext</a></code></li>
<li><code><a href="../Nokogiri/HTML4/SAX/PushParser.html">PushParser</a></code></li>
</ul></details></li>
</ul></details></li>
<li><details><summary><code><a href="../Nokogiri/HTML5.html">HTML5</a></code></summary><ul class="link-list nav-list">
<li><code><a href="../Nokogiri/HTML5/Builder.html">Builder</a></code></li>
<li><code><a href="../Nokogiri/HTML5/Document.html">Document</a></code></li>
<li><code><a href="../Nokogiri/HTML5/DocumentFragment.html">DocumentFragment</a></code></li>
<li><code><a href="../Nokogiri/HTML5/Node.html">Node</a></code></li>
<li><code><a href="../Nokogiri/HTML5/QuirksMode.html">QuirksMode</a></code></li>
</ul></details></li>
<li><code><a href="../Nokogiri/SyntaxError.html">SyntaxError</a></code></li>
<li><details><summary><code><a href="../Nokogiri/XML.html">XML</a></code></summary><ul class="link-list nav-list">
<li><code><a href="../Nokogiri/XML/Attr.html">Attr</a></code></li>
<li><code><a href="../Nokogiri/XML/AttributeDecl.html">AttributeDecl</a></code></li>
<li><code><a href="../Nokogiri/XML/Builder.html">Builder</a></code></li>
<li><code><a href="../Nokogiri/XML/CDATA.html">CDATA</a></code></li>
<li><code><a href="../Nokogiri/XML/CharacterData.html">CharacterData</a></code></li>
<li><code><a href="../Nokogiri/XML/Comment.html">Comment</a></code></li>
<li><code><a href="../Nokogiri/XML/DTD.html">DTD</a></code></li>
<li><code><a href="../Nokogiri/XML/Document.html">Document</a></code></li>
<li><code><a href="../Nokogiri/XML/DocumentFragment.html">DocumentFragment</a></code></li>
<li><code><a href="../Nokogiri/XML/Element.html">Element</a></code></li>
<li><code><a href="../Nokogiri/XML/ElementContent.html">ElementContent</a></code></li>
<li><code><a href="../Nokogiri/XML/ElementDecl.html">ElementDecl</a></code></li>
<li><code><a href="../Nokogiri/XML/EntityDecl.html">EntityDecl</a></code></li>
<li><code><a href="../Nokogiri/XML/EntityReference.html">EntityReference</a></code></li>
<li><code><a href="../Nokogiri/XML/Namespace.html">Namespace</a></code></li>
<li><details><summary><code><a href="../Nokogiri/XML/Node.html">Node</a></code></summary><ul class="link-list nav-list"><li><code><a href="../Nokogiri/XML/Node/SaveOptions.html">SaveOptions</a></code></li></ul></details></li>
<li><code><a href="../Nokogiri/XML/NodeSet.html">NodeSet</a></code></li>
<li><code><a href="../Nokogiri/XML/Notation.html">Notation</a></code></li>
<li><code><a href="../Nokogiri/XML/ParseOptions.html">ParseOptions</a></code></li>
<li><code><a href="../Nokogiri/XML/ProcessingInstruction.html">ProcessingInstruction</a></code></li>
<li><code><a href="../Nokogiri/XML/Reader.html">Reader</a></code></li>
<li><code><a href="../Nokogiri/XML/RelaxNG.html">RelaxNG</a></code></li>
<li><details><summary><code><a href="../Nokogiri/XML/SAX.html">SAX</a></code></summary><ul class="link-list nav-list">
<li><code><a href="../Nokogiri/XML/SAX/Document.html">Document</a></code></li>
<li><details><summary><code><a href="../Nokogiri/XML/SAX/Parser.html">Parser</a></code></summary><ul class="link-list nav-list"><li><code><a href="../Nokogiri/XML/SAX/Parser/Attribute.html">Attribute</a></code></li></ul></details></li>
<li><code><a href="../Nokogiri/XML/SAX/ParserContext.html">ParserContext</a></code></li>
<li><code><a href="../Nokogiri/XML/SAX/PushParser.html">PushParser</a></code></li>
</ul></details></li>
<li><code><a href="../Nokogiri/XML/Schema.html">Schema</a></code></li>
<li><code><a href="../Nokogiri/XML/Searchable.html">Searchable</a></code></li>
<li><code><a href="../Nokogiri/XML/SyntaxError.html">SyntaxError</a></code></li>
<li><code><a href="../Nokogiri/XML/Text.html">Text</a></code></li>
<li><details><summary><code><a href="../Nokogiri/XML/XPath.html">XPath</a></code></summary><ul class="link-list nav-list"><li><code><a href="../Nokogiri/XML/XPath/SyntaxError.html">SyntaxError</a></code></li></ul></details></li>
<li><code><a href="../Nokogiri/XML/XPathContext.html">XPathContext</a></code></li>
</ul></details></li>
<li><details><summary><code><a href="../Nokogiri/XSLT.html">XSLT</a></code></summary><ul class="link-list nav-list"><li><code><a href="../Nokogiri/XSLT/Stylesheet.html">Stylesheet</a></code></li></ul></details></li>
</ul></details></li>
<li><code><a href="../Object.html">Object</a></code></li>
<li><details><summary><code><a href="../XSD.html">XSD</a></code></summary><ul class="link-list nav-list"><li><details><summary><code><a href="../XSD/XMLParser.html">XMLParser</a></code></summary><ul class="link-list nav-list"><li><code><a href="../XSD/XMLParser/Nokogiri.html">Nokogiri</a></code></li></ul></details></li></ul></details></li>
</ul>
  </details>
</div>

</nav>

<main role="main" aria-labelledby="module-Nokogiri::HTML5">
  
  
    <ol role="navigation" aria-label="Breadcrumb navigation" class="breadcrumb">
      
      <li>
        
        <a href="../Nokogiri.html">Nokogiri</a><span>::</span>
        
      </li>
      
      <li>
        
        <span>HTML5</span>
        
      </li>
      
    </ol>
  

  <h1 id="module-Nokogiri::HTML5" class="anchor-link module">
    module Nokogiri::HTML5
  </h1>

  <section class="description">
    
<h2 id="module-Nokogiri::HTML5-label-Usage"><a href="#module-Nokogiri::HTML5-label-Usage">Usage</a></h2>

<p>Parse an <a href="HTML5.html"><code>HTML5</code></a> document:</p>

<pre class="ruby"><span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">HTML5</span>(<span class="ruby-identifier">input</span>)
</pre>

<p>Parse an <a href="HTML5.html"><code>HTML5</code></a> fragment:</p>

<pre class="ruby"><span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML5</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-identifier">input</span>)
</pre>

<p>‚ö† <a href="HTML5.html"><code>HTML5</code></a> functionality is not available when running JRuby.</p>

<h2 id="module-Nokogiri::HTML5-label-Parsing+options"><a href="#module-Nokogiri::HTML5-label-Parsing+options">Parsing options</a></h2>

<p>The document and fragment parsing methods support options that are different from <a href="HTML4/Document.html"><code>Nokogiri::HTML4::Document</code></a> or <a href="XML/Document.html"><code>Nokogiri::XML::Document</code></a>.</p>
<ul>
<li>
<p><code>Nokogiri.HTML5(input, url:, encoding:, **parse_options)</code></p>
</li>
<li>
<p><code>Nokogiri::HTML5.parse(input, url:, encoding:, **parse_options)</code></p>
</li>
<li>
<p><code>Nokogiri::HTML5::Document.parse(input, url:, encoding:, **parse_options)</code></p>
</li>
<li>
<p><code>Nokogiri::HTML5.fragment(input, encoding:, **parse_options)</code></p>
</li>
<li>
<p><code>Nokogiri::HTML5::DocumentFragment.parse(input, encoding:, **parse_options)</code></p>
</li>
</ul>

<p>The four currently supported parse options are</p>
<ul>
<li>
<p><code>max_errors:</code> (Integer, default 0) Maximum number of parse errors to report in <a href="XML/Document.html#attribute-i-errors"><code>HTML5::Document#errors</code></a>.</p>
</li>
<li>
<p><code>max_tree_depth:</code> (Integer, default <code>Nokogiri::Gumbo::DEFAULT_MAX_TREE_DEPTH</code>) Maximum tree depth to parse.</p>
</li>
<li>
<p><code>max_attributes:</code> (Integer, default <code>Nokogiri::Gumbo::DEFAULT_MAX_ATTRIBUTES</code>) Maximum number of attributes to parse per element.</p>
</li>
<li>
<p><code>parse_noscript_content_as_text:</code> (Boolean, default false) When enabled, parse <code>noscript</code> tag content as text, mimicking the behavior of web browsers.</p>
</li>
</ul>

<p>These options are explained in the following sections.</p>

<h3 id="module-Nokogiri::HTML5-label-Error+reporting-3A+max_errors-3A"><a href="#module-Nokogiri::HTML5-label-Error+reporting-3A+max_errors-3A">Error reporting: <code>max_errors:</code></a></h3>

<p><a href="../Nokogiri.html"><code>Nokogiri</code></a> contains an experimental <a href="HTML5.html"><code>HTML5</code></a> parse error reporting facility. By default, no parse errors are reported but this can be configured by passing the <code>:max_errors</code> option to <a href="HTML5.html#method-c-parse"><code>HTML5.parse</code></a> or <a href="HTML5.html#method-c-fragment"><code>HTML5.fragment</code></a>.</p>

<p>For example, this script:</p>

<pre class="ruby"><span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML5</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-string">'&lt;span/&gt;Hi there!&lt;/span foo=bar /&gt;'</span>, <span class="ruby-value">max_errors:</span> <span class="ruby-value">10</span>)
<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">err</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">puts</span>(<span class="ruby-identifier">err</span>)
<span class="ruby-keyword">end</span>
</pre>

<p>Emits:</p>

<pre>1:1: ERROR: Expected a doctype token
&lt;span/&gt;Hi there!&lt;/span foo=bar /&gt;
^
1:1: ERROR: Start tag of nonvoid HTML element ends with '/&gt;', use '&gt;'.
&lt;span/&gt;Hi there!&lt;/span foo=bar /&gt;
^
1:17: ERROR: End tag ends with '/&gt;', use '&gt;'.
&lt;span/&gt;Hi there!&lt;/span foo=bar /&gt;
                ^
1:17: ERROR: End tag contains attributes.
&lt;span/&gt;Hi there!&lt;/span foo=bar /&gt;
                ^</pre>

<p>Using <code>max_errors: -1</code> results in an unlimited number of errors being returned.</p>

<p>The errors returned by <a href="XML/Document.html#attribute-i-errors"><code>HTML5::Document#errors</code></a> are instances of <a href="XML/SyntaxError.html"><code>Nokogiri::XML::SyntaxError</code></a>.</p>

<p>The <a href="https://html.spec.whatwg.org/multipage/parsing.html#parse-errors">HTML standard</a> defines a number of standard parse error codes. These error codes only cover the ‚Äútokenization‚Äù stage of parsing <a href="HTML4.html"><code>HTML</code></a>. The parse errors in the ‚Äútree construction‚Äù stage do not have standardized error codes (yet).</p>

<p>As a convenience to <a href="../Nokogiri.html"><code>Nokogiri</code></a> users, the defined error codes are available via <a href="XML/SyntaxError.html#attribute-i-str1"><code>Nokogiri::XML::SyntaxError#str1</code></a> method.</p>

<pre>doc = Nokogiri::HTML5.parse('&lt;span/&gt;Hi there!&lt;/span foo=bar /&gt;', max_errors: 10)
doc.errors.each do |err|
  puts("#{err.line}:#{err.column}: #{err.str1}")
end
doc = Nokogiri::HTML5.parse('&lt;span/&gt;Hi there!&lt;/span foo=bar /&gt;',
# =&gt; 1:1: generic-parser
#    1:1: non-void-html-element-start-tag-with-trailing-solidus
#    1:17: end-tag-with-trailing-solidus
#    1:17: end-tag-with-attributes</pre>

<p>Note that the first error is <code>generic-parser</code> because it‚Äôs an error from the tree construction stage and doesn‚Äôt have a standardized error code.</p>

<p>For the purposes of semantic versioning, the error messages, error locations, and error codes are not part of Nokogiri‚Äôs public API. That is, these are subject to change without Nokogiri‚Äôs major version number changing. These may be stabilized in the future.</p>

<h3 id="module-Nokogiri::HTML5-label-Maximum+tree+depth-3A+max_tree_depth-3A"><a href="#module-Nokogiri::HTML5-label-Maximum+tree+depth-3A+max_tree_depth-3A">Maximum tree depth: <code>max_tree_depth:</code></a></h3>

<p>The maximum depth of the DOM tree parsed by the various parsing methods is configurable by the <code>:max_tree_depth</code> option. If the depth of the tree would exceed this limit, then an <code>ArgumentError</code> is thrown.</p>

<p>This limit (which defaults to <code>Nokogiri::Gumbo::DEFAULT_MAX_TREE_DEPTH</code>) can be removed by giving the option <code>max_tree_depth: -1</code>.</p>

<pre class="ruby"><span class="ruby-identifier">html</span> = <span class="ruby-string">'&lt;!DOCTYPE html&gt;'</span> <span class="ruby-operator">+</span> <span class="ruby-string">'&lt;div&gt;'</span> <span class="ruby-operator">*</span> <span class="ruby-value">1000</span>
<span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">HTML5</span>(<span class="ruby-identifier">html</span>)
<span class="ruby-comment"># raises ArgumentError: Document tree depth limit exceeded</span>
<span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">HTML5</span>(<span class="ruby-identifier">html</span>, <span class="ruby-value">max_tree_depth:</span> <span class="ruby-value">-1</span>)
</pre>

<h3 id="module-Nokogiri::HTML5-label-Attribute+limit+per+element-3A+max_attributes-3A"><a href="#module-Nokogiri::HTML5-label-Attribute+limit+per+element-3A+max_attributes-3A">Attribute limit per element: <code>max_attributes:</code></a></h3>

<p>The maximum number of attributes per DOM element is configurable by the <code>:max_attributes</code> option. If a given element would exceed this limit, then an <code>ArgumentError</code> is thrown.</p>

<p>This limit (which defaults to <code>Nokogiri::Gumbo::DEFAULT_MAX_ATTRIBUTES</code>) can be removed by giving the option <code>max_attributes: -1</code>.</p>

<pre class="ruby"><span class="ruby-identifier">html</span> = <span class="ruby-string">'&lt;!DOCTYPE html&gt;&lt;div '</span> <span class="ruby-operator">+</span> (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">1000</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-node">"attr-#{x}"</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-string">' # '</span>) <span class="ruby-operator">+</span> <span class="ruby-string">'&gt;'</span>
<span class="ruby-comment"># "&lt;!DOCTYPE html&gt;&lt;div attr-1 attr-2 attr-3 ... attr-1000&gt;"</span>
<span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">HTML5</span>(<span class="ruby-identifier">html</span>)
<span class="ruby-comment"># raises ArgumentError: Attributes per element limit exceeded</span>

<span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">HTML5</span>(<span class="ruby-identifier">html</span>, <span class="ruby-value">max_attributes:</span> <span class="ruby-value">-1</span>)
<span class="ruby-comment"># parses successfully</span>
</pre>

<h3 id="module-Nokogiri::HTML5-label-Parse+noscript+elements-27+content+as+text-3A+parse_noscript_content_as_text-3A"><a href="#module-Nokogiri::HTML5-label-Parse+noscript+elements-27+content+as+text-3A+parse_noscript_content_as_text-3A">Parse <code>noscript</code> elements‚Äô content as text: <code>parse_noscript_content_as_text:</code></a></h3>

<p>By default, the content of <code>noscript</code> elements is parsed as <a href="HTML4.html"><code>HTML</code></a> elements. Browsers that support scripting parse the content of <code>noscript</code> elements as raw text.</p>

<p>The <code>:parse_noscript_content_as_text</code> option causes <a href="../Nokogiri.html"><code>Nokogiri</code></a> to parse the content of <code>noscript</code> elements as a single text node.</p>

<pre class="ruby"><span class="ruby-identifier">html</span> = <span class="ruby-string">"&lt;!DOCTYPE html&gt;&lt;noscript&gt;&lt;meta charset='UTF-8'&gt;&lt;link rel=stylesheet href=!&gt;&lt;/noscript&gt;"</span>
<span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML5</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">html</span>, <span class="ruby-value">parse_noscript_content_as_text:</span> <span class="ruby-keyword">true</span>)
<span class="ruby-identifier">pp</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at_xpath</span>(<span class="ruby-string">"/html/head/noscript"</span>)
<span class="ruby-comment"># =&gt; #(Element:0x878c {</span>
<span class="ruby-comment">#        name = "noscript",</span>
<span class="ruby-comment">#        children = [ #(Text "&lt;meta charset='UTF-8'&gt;&lt;link rel=stylesheet href=!&gt;")]</span>
<span class="ruby-comment">#      })</span>
</pre>

<p>In contrast, <code>parse_noscript_content_as_text: false</code> (the default) causes the <code>noscript</code> element in the previous example to have two children, a <code>meta</code> element and a <code>link</code> element.</p>

<pre class="ruby"><span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML5</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">html</span>)
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at_xpath</span>(<span class="ruby-string">"/html/head/noscript"</span>)
<span class="ruby-comment"># =&gt; #(Element:0x96b4 {</span>
<span class="ruby-comment">#      name = "noscript",</span>
<span class="ruby-comment">#      children = [</span>
<span class="ruby-comment">#        #(Element:0x97e0 { name = "meta", attribute_nodes = [ #(Attr:0x990c { name = "charset", value = "UTF-8" })] }),</span>
<span class="ruby-comment">#        #(Element:0x9b00 {</span>
<span class="ruby-comment">#          name = "link",</span>
<span class="ruby-comment">#          attribute_nodes = [</span>
<span class="ruby-comment">#            #(Attr:0x9c2c { name = "rel", value = "stylesheet" }),</span>
<span class="ruby-comment">#            #(Attr:0x9dd0 { name = "href", value = "!" })]</span>
<span class="ruby-comment">#          })]</span>
<span class="ruby-comment">#      })</span>
</pre>

<h2 id="module-Nokogiri::HTML5-label-HTML+Serialization">
<a href="#module-Nokogiri::HTML5-label-HTML+Serialization"></a><a href="HTML4.html"><code>HTML</code></a> Serialization</h2>

<p>After parsing <a href="HTML4.html"><code>HTML</code></a>, it may be serialized using any of the <a href="XML/Node.html"><code>Nokogiri::XML::Node</code></a> serialization methods. In particular, <a href="XML/Node.html#method-i-serialize"><code>XML::Node#serialize</code></a>, <a href="XML/Node.html#method-i-to_html"><code>XML::Node#to_html</code></a>, and <a href="XML/Node.html#method-i-to_s"><code>XML::Node#to_s</code></a> will serialize a given node and its children. (This is the equivalent of JavaScript‚Äôs <code>Element.outerHTML</code>.) Similarly, <a href="XML/Node.html#method-i-inner_html"><code>XML::Node#inner_html</code></a> will serialize the children of a given node. (This is the equivalent of JavaScript‚Äôs <code>Element.innerHTML</code>.)</p>

<pre class="ruby"><span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML5</span>(<span class="ruby-string">"&lt;!DOCTYPE html&gt;&lt;span&gt;Hello world!&lt;/span&gt;"</span>)
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">serialize</span>
<span class="ruby-comment"># =&gt; &lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;span&gt;Hello world!&lt;/span&gt;&lt;/body&gt;&lt;/html&gt;</span>
</pre>

<p>Due to quirks in how <a href="HTML4.html"><code>HTML</code></a> is parsed and serialized, it‚Äôs possible for a DOM tree to be serialized and then re-parsed, resulting in a different DOM. Mostly, this happens with DOMs produced from invalid <a href="HTML4.html"><code>HTML</code></a>. Unfortunately, even valid <a href="HTML4.html"><code>HTML</code></a> may not survive serialization and re-parsing.</p>

<p>In particular, a newline at the start of <code>pre</code>, <code>listing</code>, and <code>textarea</code> elements is ignored by the parser.</p>

<pre class="ruby"><span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML5</span>(<span class="ruby-identifier">&lt;&lt;-EOF</span>)
<span class="ruby-value">&lt;!DOCTYPE html&gt;
&lt;pre&gt;
Content&lt;/pre&gt;
</span><span class="ruby-identifier">EOF</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-string">'/html/body/pre'</span>).<span class="ruby-identifier">serialize</span>
<span class="ruby-comment"># =&gt; &lt;pre&gt;Content&lt;/pre&gt;</span>
</pre>

<p>In this case, the original <a href="HTML4.html"><code>HTML</code></a> is semantically equivalent to the serialized version. If the <code>pre</code>, <code>listing</code>, or <code>textarea</code> content starts with two newlines, the first newline will be stripped on the first parse and the second newline will be stripped on the second, leading to semantically different DOMs. Passing the parameter <code>preserve_newline: true</code> will cause two or more newlines to be preserved. (A single leading newline will still be removed.)</p>

<pre class="ruby"><span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML5</span>(<span class="ruby-identifier">&lt;&lt;-EOF</span>)
<span class="ruby-value">&lt;!DOCTYPE html&gt;
&lt;listing&gt;

Content&lt;/listing&gt;
</span><span class="ruby-identifier">EOF</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-string">'/html/body/listing'</span>).<span class="ruby-identifier">serialize</span>(<span class="ruby-value">preserve_newline:</span> <span class="ruby-keyword">true</span>)
<span class="ruby-comment"># =&gt; &lt;listing&gt;</span>
<span class="ruby-comment">#</span>
<span class="ruby-comment">#    Content&lt;/listing&gt;</span>
</pre>

<h2 id="module-Nokogiri::HTML5-label-Encodings"><a href="#module-Nokogiri::HTML5-label-Encodings">Encodings</a></h2>

<p><a href="../Nokogiri.html"><code>Nokogiri</code></a> always parses <a href="HTML5.html"><code>HTML5</code></a> using <a href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a>; however, the encoding of the input can be explicitly selected via the optional <code>encoding</code> parameter. This is most useful when the input comes not from a string but from an IO object.</p>

<p>When serializing a document or node, the encoding of the output string can be specified via the <code>:encoding</code> options. Characters that cannot be encoded in the selected encoding will be encoded as <a href="https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references">HTML numeric entities</a>.</p>

<pre class="ruby"><span class="ruby-identifier">frag</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML5</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-string">'&lt;span&gt;ÏïÑÎäî Í∏∏ÎèÑ Î¨ºÏñ¥Í∞ÄÎùº&lt;/span&gt;'</span>)
<span class="ruby-identifier">html</span> = <span class="ruby-identifier">frag</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-value">encoding:</span> <span class="ruby-string">'US-ASCII'</span>)
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">html</span>
<span class="ruby-comment"># =&gt; &lt;span&gt;&amp;#xc544;&amp;#xb294; &amp;#xae38;&amp;#xb3c4; &amp;#xbb3c;&amp;#xc5b4;&amp;#xac00;&amp;#xb77c;&lt;/span&gt;</span>

<span class="ruby-identifier">frag</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML5</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-identifier">html</span>)
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">frag</span>.<span class="ruby-identifier">serialize</span>
<span class="ruby-comment"># =&gt; &lt;span&gt;ÏïÑÎäî Í∏∏ÎèÑ Î¨ºÏñ¥Í∞ÄÎùº&lt;/span&gt;</span>
</pre>

<p>(There‚Äôs a <a href="https://bugs.ruby-lang.org/issues/15033">bug</a> in all current versions of Ruby that can cause the entity encoding to fail. Of the mandated supported encodings for <a href="HTML4.html"><code>HTML</code></a>, the only encoding I‚Äôm aware of that has this bug is <code>'ISO-2022-JP'</code>. We recommend avoiding this encoding.)</p>

<h2 id="module-Nokogiri::HTML5-label-Notes"><a href="#module-Nokogiri::HTML5-label-Notes">Notes</a></h2>
<ul>
<li>
<p>The <a href="HTML5.html#method-c-fragment"><code>Nokogiri::HTML5.fragment</code></a> function takes a String or IO and parses it as a <a href="HTML5.html"><code>HTML5</code></a> document in a <code>body</code> context. As a result, the <code>html</code>, <code>head</code>, and <code>body</code> elements are removed from this document, and any children of these elements that remain are returned as a <a href="HTML5/DocumentFragment.html"><code>Nokogiri::HTML5::DocumentFragment</code></a>; but you can pass in a different context (e.g., ‚Äúhtml‚Äù to get <code>head</code> and <code>body</code> tags in the result).</p>
</li>
<li>
<p>The <a href="HTML5.html#method-c-parse"><code>Nokogiri::HTML5.parse</code></a> function takes a String or IO and passes it to the <code>gumbo_parse_with_options</code> method, using the default options.  The resulting <a href="Gumbo.html"><code>Gumbo</code></a> parse tree is then walked.</p>
</li>
<li>
<p>Instead of uppercase element names, lowercase element names are produced.</p>
</li>
<li>
<p>Instead of returning <code>unknown</code> as the element name for unknown tags, the original tag name is returned verbatim.</p>
</li>
</ul>

<p>Since v1.12.0</p>

  </section>


  <section id="5Buntitled-5D" class="documentation-section anchor-link">












     <section id="public-class-5Buntitled-5D-method-details" class="method-section anchor-link">
       <header>
         <h3 id="public-class-methods"><a href="#public-class-methods">Public Class Methods</a></h3>
       </header>


      <div id="method-c-fragment" class="method-detail anchor-link ">
        <div class="method-header">

            <div class="method-heading">
              <a href="#method-c-fragment" title="Link to this method">
                <span class="method-name">fragment</span>
                <span class="method-args">(...)</span>
              </a>
            </div>

        </div>


          <div class="method-controls">
            <details class="method-source-toggle">
              <summary>Source</summary>
            </details>
          </div>
          <div class="method-source-code" id="fragment-source">
            <pre class="ruby" data-language="ruby"><span class="ruby-comment"># File lib/nokogiri/html5.rb, line 280</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">fragment</span>(<span class="ruby-operator">...</span>)
  <span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-operator">...</span>)
<span class="ruby-keyword">end</span></pre>
          </div>



        <div class="method-description">


          <p>Convenience method for <a href="HTML5/DocumentFragment.html#method-c-parse"><code>Nokogiri::HTML5::DocumentFragment.parse</code></a></p>


        </div>





      </div>


      <div id="method-c-parse" class="method-detail anchor-link ">
        <div class="method-header">

            <div class="method-heading">
              <a href="#method-c-parse" title="Link to this method">
                <span class="method-name">parse</span>
                <span class="method-args">(...)</span>
              </a>
            </div>

        </div>


          <div class="method-controls">
            <details class="method-source-toggle">
              <summary>Source</summary>
            </details>
          </div>
          <div class="method-source-code" id="parse-source">
            <pre class="ruby" data-language="ruby"><span class="ruby-comment"># File lib/nokogiri/html5.rb, line 275</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">parse</span>(<span class="ruby-operator">...</span>)
  <span class="ruby-constant">Document</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-operator">...</span>)
<span class="ruby-keyword">end</span></pre>
          </div>



        <div class="method-description">


          <p>Convenience method for <a href="HTML5/Document.html#method-c-parse"><code>Nokogiri::HTML5::Document.parse</code></a></p>


        </div>





      </div>


    </section>










  </section>

</main>

<aside class="table-of-contents" role="complementary" aria-label="Table of Contents">
  <div class="toc-sticky">
    <h3 class="toc-heading">On This Page</h3>
    <nav class="toc-nav" id="toc-nav" aria-label="Page sections">
      <!-- Generated by JavaScript based on page headings -->
    </nav>
  </div>
</aside>


<footer class="site-footer">
  

  <div class="footer-bottom">
    <p>
      Generated by <a href="https://ruby.github.io/rdoc/">RDoc 7.0.3</a>
      using the Aliki theme by <a href="http://st0012.dev">Stan Lo</a>
    </p>
  </div>
</footer>

</body>

</html>
